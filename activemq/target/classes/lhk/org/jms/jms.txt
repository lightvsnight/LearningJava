 	
java 基础知识

1. JMS是什么？
 JMS Java Message Service, java消息服务，是JavaEE中的一种技术
 
2. JMS规范？
  JMS 定义了Java中访问消息中间件的接口，并没有给予实现，实现JMS 接口消息中间件成为JMS provider，例如：ActivityMQ
  
3. JMS provider : 实现JMS接口和规范的消息中间件

4. JMS message: JMS的消息，JMS消息由以下三部分组成：
   1). 消息头: 每个消息头字段都有相应的getter和setter方法
   2). 消息属性: 如果需要除消息头字段以外的值，那么可以使用消息属性
   3). 消息体: 封装具体的消息数据
   
5. JMS producer: 消息生产者，创建和发送JMS消息的客户端应用

6. JMS consumer: 消息消费者，接受和处理JMS消息的客户端应用
      消息的消费可以采用一下两种方法之一
    1). 同步消费: 通过调用消费者的receive方法从目的地中显示提取消息，receive方法可以一直阻塞到消息到达。
    2). 异步消费: 客户可以为消费者注册一个消息监听器，以定义在消息到达时所采取的动作
    
    
    
JMS 基本概念-2

JMS domains: 
	消息传递域，JMS规范中定义了两种消息传递域：点对点（point-to-point,PTP）; 消息传递域和发布/订阅消息传递域(publish/subscribe,Pub/Sub)
	
	1).点对点消息传递域的特点如下：
		[1].每个消息只能有一个消费者
		[2]. 消息的生产者和消费者之间没有时间上的相关性。无论消费者在生产者发送消息的时候是否处于运行状态，它都可以提取消息
	
	2).发布/订阅消息传递域的特点如下：
	    [1]. 每个消息可以有多个消费者
	    [2]. 生产者和消费者之间有时间上的相关性。订阅一个主题的消费者只能消费自它订阅后发布的消息。
	    	 JMS 规范允许客户创建持久订阅，这在一定程度上放松了时间上的相关性要求。
	    	 持久订阅允许消费者消费它在未处于激活状态时发送的消息。
	3).在点对点消息传递域中，目的地被称为队列(Queue); 在发布/订阅消息传递域中，目的地被称为主题(Topic)。
	
	
	
JMS的消息结构
	JMS消息由以下几部分组成：消息头，属性，消息体
	消息头包含消息的识别信息和路由信息，
	消息头包含一些标准的属性如下：
		1. JMSDestination: 由send方法设置
			消息的发送目的地，主要是指Queue，Topic; 自动分配
		2. JMSDeliveryMode: 由send方法设置
			传送模式：有两种：持久模式和非持久模式
				持久模式: 一条持久特性的消息应该被传送“一次仅仅一次”，这就意味着如果JMS提供者出现故障，该消息不会丢失，他会在服务器恢复之后再次传递。
				非持久模式: 最多会传递一次，这意味着服务器出现故障，该消息会永远消失，自动分配
		
		3. JMSExpiration: 由send方法设置
			消息的过期时间。 timeToLive = 0, 消息永远不过期。
			
		4. JMSPriority: 由send方法设置
			消息的优先级；从0~9 是个级别， 0~4 是普通消息，5~9 是加急消息。默认是4。
			
		5. JMSMessageID: 由send方法设置
			唯一识别每个消息的标识，由JMS provider 产生。自动分配
			
		6. JMSTimestamp: 由客户端设置
			消息在send时，自动设置的时间。
			
		7. JMSCorrelationID: 由客户端设置
			用来连接到另外一个消息，典型的应用是在回复消息中连接到原消息。在大多数情况下，JMSCorrelationID用于将一条消息标记为对JMSMessageID标示的上一条消息的应答，
			不过，JMSCorrelationID可以是任意值，不仅仅是JMSMessageID。由开发者设置
			
		8. JMSReplyTo: 由客户端设置
			提供本消息回复消息目的地址。由开发者设置
			
		9. JMSType: 由客户端设置
			消息类型的识别符。由开发者设置
			
		10. JMSRedelivered: 由JMS provider 设置
			如果一个客户端收到一个设置了JMSRedelivered属性的消息，则表示可能客户端曾经在早些时候收到过该消息，但是没有签收(acknowledged)
			如果该消息被重新传送，JMSRedelivered=true 反之，JMSRedelivered=false。自动设置
	
	消息体： JMS定义了5种消息体格式，也叫消息类型。可以使用不通形式发送接受数据，并可以兼容现有的消息格式。
	       TextMessage
	       MapMessage
	       BytesMessage (二进制)
	       StreamMessage
	       ObjectMessage
	       
	
	消息属性：包含以下三种类型的属性：
	         1). 应用程序设置和添加属性，比如
	         	Message.setProperty("username",username);
	         	
	         2). JMS定义的属性：
	         	使用 “JMSX” 作为属性名的前缀
	         	connection.getMetaData().getJMSXPropertyNames(),方法返回所有连接支持的JMSX属性的名字
	         	
	         3). JMS供应商特定的属性
	
	JMS定义的属性如下：
		1). JMSXUserID: 发送消息的用户标识，发送时提供商设置
		2). JMSXAppID: 发送消息的应用标识，发送时提供商设置
		3). JMSXDeliveryCount: 转发消息重试次数，第一次是1，以此类推。 发送时提供商设置
		4). JMSXGroupID: 消息所在消息组的标识，由客户端设置
		5). JMSXGroupSeq: 组内消息的序号第一个消息是1，以此类推。由客户端设置
		6). JMSXProducerTXID: 产生消息的事务的事务标识,发送时提供商设置
		7). JMSXConsumerTXID: 消费消息的事务的事务标识, 由接收时提供商设置
		8). JMSXRcvTimestamp: JMS 转发消息到消费者的时间，接收时提供商设置
		9). JMSXState: 假定存在一个消息仓库，它存储了每个消息的单独拷贝，且这些消息从原始消息被发送时开始。
					     每个拷贝的状态有：1.等待 2.准备 3.到期 4.保留。
		      		     由于状态与生产者和消费者无关，所以它不是由他们来提供。它只和在仓库中查找消息相关，因此JMS没有提供这种API. 由提供商设置
	
	
	
	
	
	
	
	
	
	
	
	
	

 